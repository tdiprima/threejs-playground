<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>One Way Or Another</title>
  <!-- https://dustinpfister.github.io/2018/04/19/threejs-line/ -->
  <!-- Create Points helper function -->
</head>
<body>
  <script src="/build/three.min.js"></script>
  <script src="points-helper.js"></script>
  <script>
    // -------- ----------
    // SCENE, CAMERA, RENDERER
    // -------- ----------
    let scene = new THREE.Scene();
    let camera = new THREE.PerspectiveCamera(45, 4 / 3, 0.5, 100);
    camera.position.set(10, 10, 10);
    camera.lookAt(0, 0, 0);
    // let renderer = new THREE.WebGL1Renderer();
    let renderer = new THREE.WebGLRenderer();
    renderer.setSize(640, 480, false);
    (document.getElementById('demo') || document.body).appendChild(renderer.domElement);

    // -------- ----------
    // HELPERS
    // -------- ----------
    // update lines group
    let updateLinesGroup = function(lines, rs, rDelta, height, radius) {
      lines.children.forEach((line, i, arr) => {
        let per = (i + 1) / arr.length;
        line.geometry.setFromPoints(createPoints(150, rs + rDelta * per, height, radius));
      });
    };

    // -------- ----------
    // LINE
    // -------- ----------
    // create lines group
    let lines = new THREE.Group();
    let lineCount = 12;
    let colors = [0x00ff00, 0xff0000, 0x0000ff, 0xff00ff, 0x00ffff, 0xffff00];
    let i = 0;
    while (i < lineCount) {
      let per = i / lineCount;
      let points = createPoints(100, 1 + 0.2 * per, 0, 5);
      let geometry = new THREE.BufferGeometry().setFromPoints(points);
      let line = (scene.userData.line = new THREE.Line(
        geometry,
        new THREE.LineBasicMaterial({
          color: colors[i % colors.length],
          linewidth: 6
        })
      ));
      lines.add(line);
      i += 1;
    }
    scene.add(lines);
    updateLinesGroup(lines, 0.5, 1.4, 10, 4);
    lines.position.y = -8;

    // -------- ----------
    // RENDER
    // -------- ----------
    renderer.render(scene, camera);
  </script>
</body>
</html>
