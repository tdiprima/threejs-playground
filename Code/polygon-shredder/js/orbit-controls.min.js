!function(){function t(t){this.object=t,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25;var e,n,o,i,a,s,r,c,h=this,l=1e-6,m=0,u=0,d=1,p=new THREE.Vector3,E=!1;this.getPolarAngle=function(){return n},this.getAzimuthalAngle=function(){return e},this.rotateLeft=function(t){u-=t},this.rotateUp=function(t){m-=t},this.panLeft=(o=new THREE.Vector3,function(t){var e=this.object.matrix.elements;o.set(e[0],e[1],e[2]),o.multiplyScalar(-t),p.add(o)}),this.panUp=function(){var t=new THREE.Vector3;return function(e){var n=this.object.matrix.elements;t.set(n[4],n[5],n[6]),t.multiplyScalar(e),p.add(t)}}(),this.pan=function(t,e,n,o){if(h.object instanceof THREE.PerspectiveCamera){var i=h.object.position.clone().sub(h.target).length();i*=Math.tan(h.object.fov/2*Math.PI/180),h.panLeft(2*t*i/o),h.panUp(2*e*i/o)}else h.object instanceof THREE.OrthographicCamera?(h.panLeft(t*(h.object.right-h.object.left)/n),h.panUp(e*(h.object.top-h.object.bottom)/o)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){h.object instanceof THREE.PerspectiveCamera?d/=t:h.object instanceof THREE.OrthographicCamera?(h.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),h.object.updateProjectionMatrix(),E=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){h.object instanceof THREE.PerspectiveCamera?d*=t:h.object instanceof THREE.OrthographicCamera?(h.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),h.object.updateProjectionMatrix(),E=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=(i=new THREE.Vector3,a=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),s=a.clone().inverse(),r=new THREE.Vector3,c=new THREE.Quaternion,function(){var t=this.object.position;i.copy(t).sub(this.target),i.applyQuaternion(a),e=Math.atan2(i.x,i.z),n=Math.atan2(Math.sqrt(i.x*i.x+i.z*i.z),i.y),e+=u,n+=m,e=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,e)),n=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,n)),n=Math.max(l,Math.min(Math.PI-l,n));var o=i.length()*d;return o=Math.max(this.minDistance,Math.min(this.maxDistance,o)),this.target.add(p),i.x=o*Math.sin(n)*Math.sin(e),i.y=o*Math.cos(n),i.z=o*Math.sin(n)*Math.cos(e),i.applyQuaternion(s),t.copy(this.target).add(i),this.object.lookAt(this.target),!0===this.enableDamping?(u*=1-this.dampingFactor,m*=1-this.dampingFactor):(u=0,m=0),d=1,p.set(0,0,0),!!(E||r.distanceToSquared(this.object.position)>l||8*(1-c.dot(this.object.quaternion))>l)&&(r.copy(this.object.position),c.copy(this.object.quaternion),E=!1,!0)})}THREE.OrbitControls=function(e,n){var o=new t(e);this.domElement=void 0!==n?n:document,Object.defineProperty(this,"constraint",{get:function(){return o}}),this.getPolarAngle=function(){return o.getPolarAngle()},this.getAzimuthalAngle=function(){return o.getAzimuthalAngle()},this.enabled=!0,this.center=this.target,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var i=this,a=new THREE.Vector2,s=new THREE.Vector2,r=new THREE.Vector2,c=new THREE.Vector2,h=new THREE.Vector2,l=new THREE.Vector2,m=new THREE.Vector2,u=new THREE.Vector2,d=new THREE.Vector2,p=-1,E=0,b=1,g=2,f=3,v=4,y=5,R=p;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var T={type:"change"},w={type:"start"},P={type:"end"};function H(t,e){var n=i.domElement===document?i.domElement.body:i.domElement;o.pan(t,e,n.clientWidth,n.clientHeight)}function M(){return Math.pow(.95,i.zoomSpeed)}function A(t){if(!1!==i.enabled){if(t.preventDefault(),t.button===i.mouseButtons.ORBIT){if(!1===i.enableRotate)return;R=E,a.set(t.clientX,t.clientY)}else if(t.button===i.mouseButtons.ZOOM){if(!1===i.enableZoom)return;R=b,m.set(t.clientX,t.clientY)}else if(t.button===i.mouseButtons.PAN){if(!1===i.enablePan)return;R=g,c.set(t.clientX,t.clientY)}R!==p&&(document.addEventListener("mousemove",x,!1),document.addEventListener("mouseup",O,!1),i.dispatchEvent(w))}}function x(t){if(!1!==i.enabled){t.preventDefault();var e=i.domElement===document?i.domElement.body:i.domElement;if(R===E){if(!1===i.enableRotate)return;s.set(t.clientX,t.clientY),r.subVectors(s,a),o.rotateLeft(2*Math.PI*r.x/e.clientWidth*i.rotateSpeed),o.rotateUp(2*Math.PI*r.y/e.clientHeight*i.rotateSpeed),a.copy(s)}else if(R===b){if(!1===i.enableZoom)return;u.set(t.clientX,t.clientY),d.subVectors(u,m),d.y>0?o.dollyIn(M()):d.y<0&&o.dollyOut(M()),m.copy(u)}else if(R===g){if(!1===i.enablePan)return;h.set(t.clientX,t.clientY),l.subVectors(h,c),H(l.x,l.y),c.copy(h)}R!==p&&i.update()}}function O(){!1!==i.enabled&&(document.removeEventListener("mousemove",x,!1),document.removeEventListener("mouseup",O,!1),i.dispatchEvent(P),R=p)}function j(t){if(!1!==i.enabled&&!1!==i.enableZoom&&R===p){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?o.dollyOut(M()):e<0&&o.dollyIn(M()),i.update(),i.dispatchEvent(w),i.dispatchEvent(P)}}function L(t){if(!1!==i.enabled&&!1!==i.enableKeys&&!1!==i.enablePan)switch(t.keyCode){case i.keys.UP:H(0,i.keyPanSpeed),i.update();break;case i.keys.BOTTOM:H(0,-i.keyPanSpeed),i.update();break;case i.keys.LEFT:H(i.keyPanSpeed,0),i.update();break;case i.keys.RIGHT:H(-i.keyPanSpeed,0),i.update()}}function D(t){if(!1!==i.enabled){switch(t.touches.length){case 1:if(!1===i.enableRotate)return;R=f,a.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(!1===i.enableZoom)return;R=v;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(e*e+n*n);m.set(0,o);break;case 3:if(!1===i.enablePan)return;R=y,c.set(t.touches[0].pageX,t.touches[0].pageY);break;default:R=p}R!==p&&i.dispatchEvent(w)}}function z(t){if(!1!==i.enabled){t.preventDefault(),t.stopPropagation();var e=i.domElement===document?i.domElement.body:i.domElement;switch(t.touches.length){case 1:if(!1===i.enableRotate)return;if(R!==f)return;s.set(t.touches[0].pageX,t.touches[0].pageY),r.subVectors(s,a),o.rotateLeft(2*Math.PI*r.x/e.clientWidth*i.rotateSpeed),o.rotateUp(2*Math.PI*r.y/e.clientHeight*i.rotateSpeed),a.copy(s),i.update();break;case 2:if(!1===i.enableZoom)return;if(R!==v)return;var n=t.touches[0].pageX-t.touches[1].pageX,E=t.touches[0].pageY-t.touches[1].pageY,b=Math.sqrt(n*n+E*E);u.set(0,b),d.subVectors(u,m),d.y>0?o.dollyOut(M()):d.y<0&&o.dollyIn(M()),m.copy(u),i.update();break;case 3:if(!1===i.enablePan)return;if(R!==y)return;h.set(t.touches[0].pageX,t.touches[0].pageY),l.subVectors(h,c),H(l.x,l.y),c.copy(h),i.update();break;default:R=p}}}function C(){!1!==i.enabled&&(i.dispatchEvent(P),R=p)}function Z(t){t.preventDefault()}this.update=function(){this.autoRotate&&R===p&&o.rotateLeft(2*Math.PI/60/60*i.autoRotateSpeed),!0===o.update()&&this.dispatchEvent(T)},this.reset=function(){R=p,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(T),this.update()},this.dispose=function(){this.domElement.removeEventListener("contextmenu",Z,!1),this.domElement.removeEventListener("mousedown",A,!1),this.domElement.removeEventListener("mousewheel",j,!1),this.domElement.removeEventListener("MozMousePixelScroll",j,!1),this.domElement.removeEventListener("touchstart",D,!1),this.domElement.removeEventListener("touchend",C,!1),this.domElement.removeEventListener("touchmove",z,!1),document.removeEventListener("mousemove",x,!1),document.removeEventListener("mouseup",O,!1),window.removeEventListener("keydown",L,!1)},this.domElement.addEventListener("contextmenu",Z,!1),this.domElement.addEventListener("mousedown",A,!1),this.domElement.addEventListener("mousewheel",j,!1),this.domElement.addEventListener("MozMousePixelScroll",j,!1),this.domElement.addEventListener("touchstart",D,!1),this.domElement.addEventListener("touchend",C,!1),this.domElement.addEventListener("touchmove",z,!1),window.addEventListener("keydown",L,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{object:{get:function(){return this.constraint.object}},target:{get:function(){return this.constraint.target},set:function(t){console.warn("THREE.OrbitControls: target is now immutable. Use target.set() instead."),this.constraint.target.copy(t)}},minDistance:{get:function(){return this.constraint.minDistance},set:function(t){this.constraint.minDistance=t}},maxDistance:{get:function(){return this.constraint.maxDistance},set:function(t){this.constraint.maxDistance=t}},minZoom:{get:function(){return this.constraint.minZoom},set:function(t){this.constraint.minZoom=t}},maxZoom:{get:function(){return this.constraint.maxZoom},set:function(t){this.constraint.maxZoom=t}},minPolarAngle:{get:function(){return this.constraint.minPolarAngle},set:function(t){this.constraint.minPolarAngle=t}},maxPolarAngle:{get:function(){return this.constraint.maxPolarAngle},set:function(t){this.constraint.maxPolarAngle=t}},minAzimuthAngle:{get:function(){return this.constraint.minAzimuthAngle},set:function(t){this.constraint.minAzimuthAngle=t}},maxAzimuthAngle:{get:function(){return this.constraint.maxAzimuthAngle},set:function(t){this.constraint.maxAzimuthAngle=t}},enableDamping:{get:function(){return this.constraint.enableDamping},set:function(t){this.constraint.enableDamping=t}},dampingFactor:{get:function(){return this.constraint.dampingFactor},set:function(t){this.constraint.dampingFactor=t}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=t}}})}();
