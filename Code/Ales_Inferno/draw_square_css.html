<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>it's not perfect but</title>
  <!-- If you want to download the portion of the image under the square, you would need
    to capture the square's dimensions (width and height) and its position relative to the
    image. Then, you can use these values to define the portion of the image to extract and download. -->
</head>
<body>
<div id="imageContainer" style="position: relative; width: 500px; height: 500px;">
  <img src="/images/image2.jpg" style="width: 100%; height: auto;">
  <!-- The square will be dynamically added here -->
</div>
<script>
  let startX, startY, square;

  const container = document.getElementById('imageContainer');

  container.addEventListener('mousedown', function(e) {
    // Record the start position and create the square element
    startX = e.offsetX;
    startY = e.offsetY;
    square = document.createElement('div');
    square.style.position = 'absolute';
    square.style.border = '2px solid #FF0000'; // Red border
    square.style.left = `${startX}px`;
    square.style.top = `${startY}px`;
    container.appendChild(square);

    // Add mousemove listener to the container
    container.addEventListener('mousemove', onMouseMove);
  });

  document.addEventListener('mouseup', function() {
    // Remove the mousemove listener when the user releases the button
    container.removeEventListener('mousemove', onMouseMove);
  });

  function onMouseMove(e) {
    // Update the square's dimensions based on the current mouse position
    const width = Math.abs(e.offsetX - startX);
    const height = Math.abs(e.offsetY - startY);
    square.style.width = `${width}px`;
    square.style.height = `${height}px`;
    square.style.left = `${Math.min(e.offsetX, startX)}px`;
    square.style.top = `${Math.min(e.offsetY, startY)}px`;
  }
</script>
</body>
</html>
